!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.textMarker=t():e.textMarker=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";function r(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function i(e,t,n){var r=""+e;return n[r]instanceof Array==!1&&(n[r]=[]),n[r].push(t)}function o(e,t){return t[""+e]?t[""+e].reverse():[]}function a(e,t){switch(t.type){case"BLOCK_END":case"RANGE_END":e.pop();break;case"BLOCK_START":case"RANGE_START":e.push(t)}}function u(e,t,n){e.length>0&&e.forEach(function(e){n.push(e),a(t,e)})}function s(e){return"BLOCK_START"===e.type||"BLOCK_END"===e.type}function c(e){return"RANGE_START"===e.type||"RANGE_END"===e.type}function f(e){return"RANGE_END"===e.type||"BLOCK_END"===e.type}function l(e){return"RANGE_START"===e.type||"BLOCK_START"===e.type}function p(e,t){return e.name===t.name&&!!(l(e)&&f(t)||l(t)&&f(e))}function d(e){return Object.assign({},e,{_virtual:!0})}function h(e){var t=void 0;return s(e)&&l(e)&&(t="BLOCK_END"),s(e)&&f(e)&&(t="BLOCK_START"),c(e)&&l(e)&&(t="RANGE_END"),c(e)&&f(e)&&(t="RANGE_START"),Object.assign({},d(e),{type:t})}function v(e,t){var n=t.at(t.length-1);return!(n.name!==e.name||!l(n)||!f(e))}function y(e,t){for(var n=t.length-1;t.length>0;){var r=h(t.at(n));e.push(r),a(t,r),n-=1}}function g(e){return!!e.chars&&!!k.exec(e.chars)}function b(e){var t={},n=new x.default,r=void 0,s=[],c=void 0;return e.forEach(function(e,y){if(u(o(y,t),n,s),!f(e))return s.push(e),void a(n,e);if(v(e,n))return s.push(e),void a(n,e);if(n.contains(e.name)){if("TABLE_CELL"===e.name){for(c=n.length-1;!p(e,n.at(c));)r=h(n.at(c)),s.push(r),a(n,r),c-=1;return s.push(e),void a(n,e)}for(c=n.length-1;!p(e,n.at(c));){if("TABLE_CELL"===n.at(c).name&&l(n.at(c)))return;r=h(n.at(c)),i(y+1,d(n.at(c)),t),s.push(r),a(n,r),c-=1}s.push(e),a(n,e)}}),y(s,n),s}Object.defineProperty(t,"__esModule",{value:!0}),t.escapeStringForRegex=r,t.setTokensForIndex=i,t.getTokensForIndex=o,t.updateStack=a,t.handleBufferedTokens=u,t.isBlock=s,t.isRange=c,t.isEndToken=f,t.isStartToken=l,t.isMatching=p,t.createVirtualToken=d,t.createMatch=h,t.closesPreviousToken=v,t.closeOpenTokens=y,t.isVisibleToken=g,t.normalize=b;var m=n(4),x=function(e){return e&&e.__esModule?e:{default:e}}(m),k=/\S/},function(e,t,n){"use strict";function r(e,t){for(var n=[],r=new RegExp(""+e,"gi"),i=r.exec(t);i;)n.push(i.index),i=r.exec(t);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=r(i),a=n(9),u=r(a),s=n(10),c=r(s),f=n(11),l=r(f),p=n(12).version;t.default={parse:o.default,range:u.default,keyword:c.default,block:l.default,tokensToString:i.tokensToString,version:p}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var r=n.pattern,i=n.onMatch;if(e&&r&&i&&t)for(var o=void 0,a=r.exec(e);a;)o=i(a),t.push(o),a=r.exec(e)}function o(e){var t="",n=void 0;return e.forEach(function(e){n="LITERAL"===e.type?", "+e.chars:"",n=n.replace("\n","\\n").replace("\t","\\t"),t+=e.index+", "+e.type+", "+e.name+n+"\n"}),t}function a(e){console.log(o(e))}function u(e,t){try{var n=e;return t.forEach(function(e){n=e.apply(null,[n])}),n}catch(e){console.error("[Middleware] "+e.message)}return e}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=u(e,n);if(!r&&e)return e;for(var o=t.length,a=new l.default;o--;)i(r,a,t[o]);var s=new d.default(r,a).scan();return(0,c.normalize)(s)}Object.defineProperty(t,"__esModule",{value:!0}),t.findPatterns=i,t.tokensToString=o,t.printTokens=a,t.applyMiddleware=u,t.default=s;var c=n(0),f=n(5),l=r(f),p=n(6),d=r(p)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e.contains("TABLE")}function o(e){return e.contains("TABLE_CELL")}function a(e){return e.contains("TABLE_ROW")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.isInTable=i,t.isInTableCell=o,t.isInTableRow=a;var s=function(){function e(){r(this,e),this.stack={all:[]}}return u(e,[{key:"at",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";return this.stack[t]&&this.stack[t][e]}},{key:"push",value:function(e){this.stack.all.push(e),this.stack[e.name]instanceof Array==!1&&(this.stack[e.name]=[]),this.stack[e.name].push(e)}},{key:"pop",value:function(){var e=this.stack.all.pop();return e&&this.stack[e.name].pop(),e}},{key:"contains",value:function(e){return!!(this.stack[e]&&this.stack[e].length>0)}},{key:"length",get:function(){return this.stack.all.length}},{key:"last",get:function(){var e=this.stack.all.length-1;return this.stack.all[e]}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var n=e.priority||0,r=t.priority||0;return n<r?-1:n>r?1:0}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e<t?-1:e>t?1:0}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.sortByPriority=i,t.offsetSort=o;var u=function(){function e(){r(this,e),this.atOffset={},this.offsets=[]}return a(e,[{key:"on",value:function(e,t){var n=""+t;return this.atOffset[n]?this.atOffset[n][e].sort(i):[]}},{key:"getOffsets",value:function(){return[].concat(this.offsets.sort(o))}},{key:"push",value:function(e){var t=void 0,n=void 0;if(e instanceof Array==!1)this.hasIndexAtOffset(e.index)||this.offsets.push(e.index),n=this.getTokenIndex(e.index),n[e.handle].push(e);else for(t=e.length;t--;)this.hasIndexAtOffset(e[t].index)||this.offsets.push(e[t].index),n=this.getTokenIndex(e[t].index),n[e[t].handle].push(e[t])}},{key:"hasIndexAtOffset",value:function(e){var t="string"!=typeof e?""+e:e;return!!this.atOffset[t]}},{key:"getTokenIndex",value:function(e){var t=this.atOffset,n="string"!=typeof e?""+e:e;return t[n]||(this.atOffset[n]={before:[],at:[],after:[]}),this.atOffset[n]}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){var t=0;switch(e.type){case"BLOCK_START":t=e.delimiters.open.length;break;case"BLOCK_END":t=e.delimiters.close.length;break;default:t=e.chars?e.chars.length:0}return t}function u(e,t,n){return e[0]?e[0].index:!!t[0]&&t[0].index}function s(e,t){return e.map(function(e){return Object.assign({},e,{line:t})})}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getTokenLength=a,t.getCharIndexFromTokens=u,t.appendLineData=s;var f=n(7),l=r(f),p=n(1),d=(r(p),n(8)),h=r(d),v=function(){function e(t,n){o(this,e),this.text=t,this.patternMatches=n}return c(e,[{key:"scan",value:function(){var e=[],t=void 0,n=this.patternMatches.getOffsets(),r=void 0,o=void 0,c=void 0,f=void 0,p=void 0,d=void 0,v=void 0,y=(0,h.default)(this.text);for(0!==n[0]&&n.unshift(0),n[n.length-1]!==this.text.length&&n.push(this.text.length),r=n.length+1;r--;){t=null,o=o||n.shift();var g=o,b=void 0;c=n.shift(),p=this.patternMatches.on("before",o),d=this.patternMatches.on("after",o),v=this.patternMatches.on("at",o),b=y(u(p,v,d)),v&&v.length&&(t=v[v.length-1],g+=a(t)),p&&p.length&&e.push.apply(e,i(s(p,b))),t&&e.push.apply(e,i(s([t],b))),g<this.text.length&&g<c&&(f=(0,l.default)(this.text.substring(g,c),g),e.push.apply(e,i(s([f],y(f.index))))),o=c}return e}}]),e}();t.default=v},function(e,t,n){"use strict";function r(e,t){return"string"!=typeof e?(console.error("LITERAL requires text index to be a string. Got",void 0===e?"undefined":i(e)),!1):"number"!=typeof t?(console.error("LITERAL requires start index to be a number. Got",void 0===t?"undefined":i(t)),!1):{type:"LITERAL",name:"TEXT",chars:e,index:t}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r},function(e,t,n){"use strict";function r(e){var t=(0,o.default)("\n",e),n=(t.length,0);return function(e){if(0===t.length)return 1;if(e<=t[n])return n+1;for(;e>t[n];)n+=1;return n+1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function r(e,t){var n=void 0;return e instanceof RegExp&&(n=e),"string"==typeof e&&(n=new RegExp(""+e,"gi")),n?{pattern:n,onMatch:function(e){var n=e.index,r=e.index+e[0].length;return[{name:t,type:"RANGE_START",chars:null,index:n,pairedWith:r,delimiters:{open:null,close:null},priority:n+r,handle:"before"},{name:t,type:"RANGE_END",chars:null,index:r,pairedWith:n,delimiters:{open:null,close:null},priority:-1*(n+r),handle:"before"}]}}:(console.error("Cannot create a text range token without a string or regex. Cannot use:",void 0===e?"undefined":i(e)),!1)}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r},function(e,t,n){"use strict";function r(e,t){var n=(0,i.escapeStringForRegex)(""+e);return{pattern:new RegExp(n,"gi"),onMatch:function(n){var r=n.index;return{name:t,type:"KEYWORD",chars:""+e,index:r,handle:"at"}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(0)},function(e,t,n){"use strict";function r(e){var t=e.open,n=e.close,r=void 0===n?t:n,i=(0,o.escapeStringForRegex)(t),a=(0,o.escapeStringForRegex)(r);return new RegExp("("+i+")+[\\s\\S]+?("+a+")+","gi")}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DEFAULT",n=void 0,i=void 0;return{pattern:e instanceof RegExp?e:r(e),onMatch:function(r){return n=r.index,i=r.index+r[0].length-r[2].length,[{name:t,type:"BLOCK_START",index:n,pairedWith:i,chars:r[1],handle:"at",delimiters:e},{name:t,index:i,pairedWith:n,type:"BLOCK_END",chars:r[2],handle:"at",delimiters:e}]}}}Object.defineProperty(t,"__esModule",{value:!0}),t.makeBlockRegex=r,t.default=i;var o=n(0)},function(e,t){e.exports={name:"text-marker",version:"0.9.0",description:"A lexical analyzer for parsing text",main:"dist/text_marker.js",repository:{type:"git",url:"https://github.com/Paul-Guerra/text-marker.git"},scripts:{postinstall:"npm run mkdirs",mkdirs:"mkdir -p tmp/",rmdirs:"rm -rf tmp/",start:"npm run build && npm run webpack:watch & babel src/ --out-dir tmp/ --watch",build:"npm run compile && webpack",compile:"rm -rf tmp/* && babel src/ --out-dir tmp/","webpack:watch":"webpack --watch","build:prod":"npm run compile && webpack --config ./webpack.prod.config.js",test:"jest","test:config":"jest --showConfig",lint:"eslint src/**/*.js"},author:"",license:"MIT",devDependencies:{"babel-cli":"^6.24.1","babel-preset-es2015":"^6.24.1",eslint:"^4.3.0","eslint-config-airbnb":"^15.1.0","eslint-loader":"^1.9.0","eslint-plugin-babel":"^4.1.2","eslint-plugin-import":"^2.7.0","eslint-plugin-react":"^7.1.0",jest:"^20.0.4","uglifyjs-webpack-plugin":"^0.4.6",webpack:"^3.4.1","webpack-merge":"^4.1.0"},peerDependencies:{"babel-polyfill":"6.x"}}}]).default});